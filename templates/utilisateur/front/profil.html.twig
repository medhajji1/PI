{% extends 'base.html.twig' %}

{% block title %}Profil{% endblock %}
{% block stylesheet %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">

<link rel="stylesheet" href="{{ asset('front/css/profil.scss') }}"/>
<script src="https://kit.fontawesome.com/781f6fd5c7.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>

{% endblock %}



{% block body %}
   
 <div class="hero-wrap" >
  <div class="hero-wrap ftco-degree-bg" style="background-image: url('{{ asset('front/images/bg_1.jpg') }}');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-md-7 heading-section text-center">
          <h2 class="mb-4" style="padding-top: 121px;">Profile</h2>
        </div>
      </div>
       <div class="row justify-content-center" style="color: white;">
        <div class="col-md-8">
              </a>
            </div>


          </div>
              {{ form_start(form) }}
              {{ form_errors(form) }}
              <div class="row">
                <div class="col-sm">
                    {{ form_label(form.cin, 'Cin') }}
                    {{ form_widget(form.cin, {'attr': {'class': 'form-control', 'value': user.cin}}) }}
                    <div class="error-class">{{ form_errors(form.cin) }}</div>
                </div>
                
                <div class="col-sm">
                    {{ form_label(form.nom, 'Nom') }}
                    {{ form_widget(form.nom, {'attr': {'class': 'form-control', 'value': user.nom}}) }}
                    <div class="error-class">{{ form_errors(form.nom) }}</div>
                </div>
  
              </div>
  
              <div class="row">
                <div class="col-sm">
                    {{ form_label(form.prenom, 'prenom') }}
                    {{ form_widget(form.prenom, {'attr': {'class': 'form-control', 'value': user.prenom}}) }}
                    <div class="error-class">{{ form_errors(form.prenom) }}</div>
                </div>
                <div class="col-sm">
                    {{ form_label(form.motdepasse, 'mot de passe') }}
                    {{ form_widget(form.motdepasse, {'attr': {'class': 'form-control'}}) }}
                    <div class="error-class">{{ form_errors(form.motdepasse) }}</div>
                </div>
              </div>
  
  
  
              <div class="row">
                <div class="col-sm">
                    {{ form_label(form.email, 'Email') }}
                    {{ form_widget(form.email, {'attr': {'class': 'form-control', 'value': user.email}}) }}
                    <div class="error-class">{{ form_errors(form.email) }}</div>
                </div>
                
                <div class="col-sm">
                    {{ form_label(form.numerotelephone, 'Numéro de téléphone') }}
                    {{ form_widget(form.numerotelephone, {'attr': {'class': 'form-control', 'value': user.numerotelephone}}) }}
                    <div class="error-class">{{ form_errors(form.numerotelephone) }}</div>
                </div>
              </div>

              
              <div class="col-md-12 text-center">
                <div class="form-group" style="margin-top: 17px;display: inline-block;">
                <button class="btn btn-primary py-3 px-5"  >MODIFIER</button>
              </div>
              </div>
            {{ form_end(form) }}

  
          </div>
  
        </div>
  
    </div>
  </div>
        <!-- /Breadcrumb -->
  
        <div class="row gutters-sm">
        
          <div class="col-md-4 ">
            <div class="card" id="test">
              <div class="card-body">
                <div class="d-flex flex-column align-items-center text-center">
                  <img src="{{ asset('imgLoad/' ~ user.image) }}" alt="Admin" class="rounded-circle" width="200">
                  <div class="mt-3">
                    <h4>{{user.nom}} {{user.prenom}}</h4>
                    <div class="row">
                      {{ form_start(formImage) }}
                      <div class="form-group">
                        <label for="{{ formImage.imageFile.vars.id }}" class="submit" style="cursor:pointer;">
                        {{ form_row(formImage.imageFile, {'attr': {'class': 'd-none'}}) }}
                        </label>
                      </div>
                      <div class="form-group">
                          <button id="upload-btn" class="submit" type="submit">Upload</button>
                      </div>
                      {{ form_end(formImage) }}
                    </div>
                    <br><br>

                    <div class="row">
                        <button class="submit" onclick="confirmationDeconnexion()"><i class="fa-solid fa-right-from-bracket" style="color: black; font-size: 20px;cursor: pointer;" ></i>
                         Déconnecter</button>
                    </div>
                    
                    <div class="row">
                    <a style=" text-decoration-line:none" href="{{ path('del_utilisateur', { 'cin': user.cin }) }}" onclick="return confirm('Voulez vous vraiment supprimer votre profil ?')">

                        <button class="submit" style="background-color:#f9e3f5;"><i class="fa-solid fa-user-xmark" style="color: black; font-size: 20px;cursor: pointer;"></i>
                         Supprimer compte</button>
                    </a>
                    </div>

                    
                  </div>
                </div>
              </div>
       
            </div>
           
          </div>
          <div class="col-md-8">
            <div class="card mb-3">
              <div class="card-body">
              
            {% for message in app.flashes('error') %}

              <div class="alert alert-error">
                <div class="icon__wrapper">
                  <span class="mdi mdi-alert-outline"><i class="fa-solid fa-circle-exclamation"></i></span>
                </div>
                  &nbsp;&nbsp;&nbsp;{{ message }}
                <span class="mdi mdi-open-in-new open"></span>
                <span class="mdi mdi-close close" onclick="closeAlert()"><i class="fa-solid fa-xmark"></i></span>
              </div>
            {% endfor %}
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Nom complet</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {{user.nom}} {{user.prenom}}
                  </div>
                </div>
                <hr>

                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Adresse mail</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {{user.email}}
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Numéro de téléphone</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {{user.numerotelephone}}
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">CIN</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {{user.cin}}
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-12">
                    
                    <i class="fa-solid fa-user-pen" onclick="modifier()" style="cursor:pointer;"></i>
                    
                  </div>
                </div>
              </div>
            </div>

    </div>
      </div>
    </div>
  </div>

      </div>
  </div>
<script>



  function confirmationDeconnexion() {
      if (confirm("Voulez vous vraiment se déconnecter ?")) {
            window.location.href = "{{ path('app_logout') }}";
      }
  }
  function modifier() {
    const card = document.querySelector(".card-profil");
    if (card.style.display === "none") {
      card.style.display = "block";
    } else {
      card.style.display = "none";
    }
  }
  function closeAlert(){
      const alert = document.querySelector(".alert");
      alert.style.display = "none";
  }

</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

{% endblock %}